<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book Form</title>
</head>
<body>
<h1 th:text="${book != null} ? 'Edit Book' : 'Add New Book'">Book Form</h1>

<form th:if="${book != null}" th:action="@{'/books/edit/' + ${book.id}}" method="post">
    <label>Title:</label>
    <input type="text" name="title" th:value="${book.title}" required>

    <label>Genre:</label>
    <input type="text" name="genre" th:value="${book.genre}" required>

    <label>Average Rating:</label>
    <input type="number" step="0.1" name="averageRating" th:value="${book.averageRating}" required>

    <label>Author:</label>
    <select name="authorId" required>
        <option th:each="author : ${authors}"
                th:value="${author.id}"
                th:text="${author.name} + ' ' + ${author.surname}"
                th:selected="${author.id} == ${book.author.id}">
        </option>
    </select>

    <input type="submit" value="Save Book">
</form>

<form th:if="${book == null}" th:action="@{'/books/add'}" method="post">
    <label>Title:</label>
    <input type="text" name="title" required>

    <label>Genre:</label>
    <input type="text" name="genre" required>

    <label>Average Rating:</label>
    <input type="number" step="0.1" name="averageRating" required>

    <label>Author:</label>
    <select name="authorId" required>
        <option th:each="author : ${authors}"
                th:value="${author.id}"
                th:text="${author.name} + ' ' + ${author.surname}">
        </option>
    </select>

    <input type="submit" value="Add Book">
</form>
</body>
</html>
